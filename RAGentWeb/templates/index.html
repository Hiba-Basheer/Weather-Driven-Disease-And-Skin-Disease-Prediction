<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disease Prediction & RAG Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/static/style.css" rel="stylesheet">
    <style>
        .tab-button.active {
            @apply border-indigo-500 text-indigo-600 bg-indigo-50;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl">
        <header class="text-center py-6 bg-white shadow-lg rounded-xl mb-8">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800">RAGent</h1>
            <p class="mt-2 text-md text-gray-500">ML, DL, Image Classification, RAG Chatbot & Power BI Dashboard in one platform.</p>
        </header>

        <!-- Tabs -->
        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 border-b border-gray-200 mb-6 bg-black p-4 rounded-xl shadow">
            <button class="tab-button flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150 active" data-tab="ml">ML Prediction</button>
            <button class="tab-button flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150" data-tab="dl">DL Prediction</button>
            <button class="tab-button flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150" data-tab="image">Image Classification</button>
            <button class="tab-button flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150" data-tab="rag">RAG Chatbot</button>
            <button class="tab-button flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-150" data-tab="dashboard">Dashboard</button>
        </div>

        <!-- Tab Contents -->
        <div class="space-y-6">

            <!-- ML Prediction Form -->
            <div id="ml" class="tab-content active bg-white p-6 rounded-xl shadow-lg border-t-4 border-indigo-500">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">ML Prediction (Structured Data)</h2>
                <form id="ml-form">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Age:</label>
                        <input type="number" id="ml-age" name="age" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Gender:</label>
                        <select id="ml-gender" name="gender" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">City:</label>
                        <input type="text" id="ml-city" name="city" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Symptoms:</label>
                        <textarea id="ml-symptoms" name="symptoms" rows="3" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition duration-150">
                        Predict ML Disease Risk
                    </button>
                    <div id="ml_output" class="mt-8 bg-white p-6 rounded-xl shadow-lg border-t-4 border-gray-300">
                        <h3>Results</h3>
                        <p>Run a prediction or start a chat to see results here.</p>
                    </div>
                </form>
            </div>

            <!-- DL Prediction Form -->
            <div id="dl" class="tab-content bg-white p-6 rounded-xl shadow-lg border-t-4 border-indigo-500">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">DL Prediction (Unstructured Data)</h2>
                <form id="dl-form">
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Describe your condition (Include age & city):</label>
                        <textarea id="dl-note" name="note" rows="4" placeholder="e.g., I am 30 years old living in Kochi. I am feeling severe headache."
                                  class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required></textarea>
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition duration-150">
                        Predict DL Disease Risk
                    </button>
                    <div id="dl_output" class="mt-8 bg-white p-6 rounded-xl shadow-lg border-t-4 border-gray-300">
                        <h3>Results</h3>
                        <p>Run a prediction or start a chat to see results here.</p>
                    </div>
                </form>
            </div>

            <!-- Image Classification -->
            <div id="image" class="tab-content bg-white p-6 rounded-xl shadow-lg border-t-4 border-purple-500">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Skin Disease Image Classification</h2>
                <form id="image-form">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Upload Skin Image:</label>
                        <input type="file" id="image-file" name="file" accept="image/*" required 
                               class="w-full p-3 border border-gray-300 rounded-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100">
                    </div>
                    <button type="submit" class="w-full bg-purple-600 text-white p-3 rounded-lg font-semibold hover:bg-purple-700 transition duration-150">
                        Classify Image
                    </button>
                    <div id="image_output" class="mt-8 bg-white p-6 rounded-xl shadow-lg border-t-4 border-gray-300">
                        <h3>Results</h3>
                        <p>Run a prediction or start a chat to see results here.</p>
                    </div>
                </form>
            </div>

            <!-- RAG Chatbot -->
            <div id="rag" class="tab-content bg-white p-6 rounded-xl shadow-lg border-t-4 border-green-500">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">RAG Chatbot (Disease Knowledge)</h2>
                <div id="chat-window" class="h-80 overflow-y-auto p-4 mb-4 border border-gray-200 rounded-lg bg-gray-50 flex flex-col space-y-3">
                    <div class="text-sm text-gray-500">
                        Welcome! Ask me anything about skin diseases or weather-related health risks.
                    </div>
                </div>
                <form id="rag-form" class="flex space-x-2">
                    <input type="text" id="rag-query" name="query" required placeholder="Ask a question..."
                           class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500">
                    <button type="submit" class="flex-shrink-0 bg-green-600 text-white p-3 rounded-lg font-semibold hover:bg-green-700 transition duration-150">
                        Send
                    </button>
                </form>
            </div>

            <!-- Power BI Dashboard -->
            <div id="dashboard" class="tab-content bg-white p-6 rounded-xl shadow-lg border-t-4 border-yellow-500">
                <h2 class="text-2xl font-semibold mb-4 text-gray-700">Power BI Dashboard</h2>
                <p class="text-gray-600 mb-4">Below is your integrated Power BI dashboard displaying real-time analytics:</p>
                <div class="aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow-lg">
                    <iframe title="Power BI Dashboard" width="100%" height="600"
                        src="https://app.powerbi.com/groups/me/reports/59da4c91-2637-4aea-bf13-ce025ff19e28/7dc98903ec04005406a4?experience=power-bi"
                        frameborder="0" allowFullScreen="true"></iframe>
                </div>
            </div>
        </div>

        <!-- Output -->
        
    </div>

    <script src="/static/scripts.js"></script>
</body>
</html>
